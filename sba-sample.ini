; This is an example configuration file for Simple Build Agent (SBA).
; See the SBA documentation for details about each setting.
; note: All property names are case-sensitive!  All paths are relative to
; the location of this configuration file (aka. the "working folder").

[settings]
; These are the SBA program settings.
; All available command-line options can be specified here.

; specify a folder for all logs generated by this run
log-folder    = ../build-sba/log 
; always send notification e-mail, even if no builds were done
notify-always = 1
; notification settings
notify-to     = me@example.com
notify-server = localhost
notify-subj   = "My builds status:"

[build-default]
; default settings & commands for all builds

; build root directory (will validate/create it before running commands)
dir           = ../build-sba
; clean step command
clean         = make clean clean-bin $my_macro
; deploy step command (blank for none)
deploy        = 
; distribution command (uses SBA built-in FTP client)
distrib       = sba_ftp ftp.myhost.org user pass /nightly $dir/$name/*.hex

; Convenience macro (variable) to be used in other commands.
; You can also use any existing property as a macro, eg "name" for current build name.
; For example here we set one that is used for all build and clean commands,
; and it itself has macros to reflect the currently executing build name and folder
; (which in this example are then passed to the 'make' command).
my_macro      = BUILD_TYPE=$name BUILD_PATH=$dir


; all other blocks define individual build configurations

[board-6.1]
; build step command
build         = make all -j1 $my_macro BOARD_VER=6 BOARD_REV=1
finish        = rm -f ../build-sba/log/$name-*.log ; delete all logs for this job

[board-8.0]
build         = make all -j1 $my_macro BOARD_VER=8 BOARD_REV=0
; always incremental, don't clean first
incremental   = 1
; always build even if no updates detected
force         = 1
; this build is disabled (1 to enable)
status        = 0
